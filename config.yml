##############################################################################
# Crypto Lake Configuration - Local Testing
##############################################################################

general:
  timezone: "UTC"
  log_level: "INFO"
  base_path: "./data"  # Creates data/ folder in project directory

exchanges:
  - name: "binance"
    symbols:
      # Core Crypto Set (13 symbols)
      - SOLUSDT
      - SUIUSDT
      - ADAUSDT
      - BTCUSDT
      - ETHUSDT
      - BNBUSDT
      - XRPUSDT
      - DOGEUSDT
      - AVAXUSDT
      - LINKUSDT
      - LTCUSDT
      - DOTUSDT
      # FX
      - EURUSDT
    rest_url: "https://api.binance.com/api/v3"
    wss_url: "wss://stream.binance.com:9443/ws"

  - name: "coinbase"
    symbols:
      - BTC-USD
      - ETH-USD
      - SOL-USD
    rest_url: "https://api.exchange.coinbase.com"
    wss_url: "wss://ws-feed.exchange.coinbase.com"

  - name: "kraken"
    symbols:
      - BTC/USD
      - ETH/USD
      - SOL/USD
    rest_url: "https://api.kraken.com"
    wss_url: "wss://ws.kraken.com/v2"

collector:
  write_interval_sec: 60
  reconnect_backoff: 10
  max_reconnect_backoff: 300      # Max backoff 5 minutes
  reconnect_jitter: 0.5
  output_format: "jsonl"

transformer:
  resample_interval_sec: 1
  parquet_compression: "snappy"
  schedule_minutes: 60

macro_minute:
  tickers:
    - SPY          # S&P 500 ETF
    - QQQ          # NASDAQ 100 ETF
    - IWM          # Russell 2000 ETF
    - UUP          # US Dollar Index Fund
    - ES=F         # E-mini S&P 500 Futures
    - GC=F         # Gold Futures
    - CL=F         # Crude Oil Futures
    - EURUSD=X     # EUR/USD
    - GBPUSD=X     # GBP/USD
    - USDJPY=X     # USD/JPY
    - USDCAD=X     # USD/CAD
    - USDCHF=X     # USD/CHF
  schedule_minutes: 15
  startup_backfill_days: 7
  runtime_lookback_days: 1

qa:
  enable_ai: true
  hourly_window_min: 30
  daily_run_utc: "00:15"
  ai_labeler: "rules"

  iforest:
    n_estimators: 200
    contamination: 0.005
    random_state: 42

  zscore:
    window: 3600
    k: 5.0

  jump:
    k_sigma: 6.8
    spread_stable_bps: 50
    cooldown_seconds: 5
    min_trade_count: 5

  reporting:
    anomalies_top_n: 10

testing:
  enabled: false
  transform_interval_min: 2
  macro_interval_min: 1
  macro_transform_interval_min: 1
  macro_lookback_startup_days: 1
  macro_runtime_lookback_days: 1
  backfill_days: 3
  base_path: "./data/test"

# API server configuration
api:
  enabled: false                    # Set to true or use --mode serve
  host: "127.0.0.1"                # Bind address (use 0.0.0.0 for network access)
  port: 8000
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"
  ws_queue_size: 1000               # Per-subscriber event buffer

# GCS/GCP not needed for local testing
gcs:
  bucket_name: ""

gcp:
  project_id: ""
  region: ""
